{% extends 'base.html' %}
{% block content %}
<div class="form-container">
    <h2>Upload Exam/Paper</h2>
    <form method="post" enctype="multipart/form-data" id="upload-paper-form">
        {% csrf_token %}
        <label>Title:</label>
        <input type="text" name="paperTitle" required><br>
        <label>Class:</label>
        <input type="text" name="paperClass" required><br>
        <label>File:</label>
        <input type="file" name="paper-file" required><br>
        <button type="submit">Upload Paper</button>
    </form>
    <div id="paper-success" style="color:green;"></div>
    <div id="paper-error" style="color:red;"></div>
</div>
<script>
document.getElementById('upload-paper-form').onsubmit = async function(e) {
    e.preventDefault();
    const form = e.target;
    const formData = new FormData(form);
    const resp = await fetch("/teachers/upload-paper/", {
        method: "POST",
        body: formData,
        credentials: 'same-origin'
    });
    const result = await resp.json();
    if(result.success) {
        document.getElementById('paper-success').innerText = 'Paper uploaded!';
        form.reset();
    } else {
        document.getElementById('paper-error').innerText = result.error || 'Error uploading paper.';
    }
};
</script>
{% endblock %}
